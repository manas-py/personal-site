<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<title>manas.net</title>
<style>
  :root{
    --overlay-opacity: 0.6;
    --overlay-blend: overlay;
  }

  *{box-sizing:border-box}
  html,body{height:100%; margin:0; padding:0}
  body{
    background:#000;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow:hidden;
  }

  /* Scene */
  .scene{ position:fixed; inset:0; width:100%; height:100%; min-height:100vh; overflow:hidden; isolation:isolate; background-color:#000; }
  .scene::before, .scene::after{ content:""; position:absolute; inset:0; background-repeat:no-repeat; background-size:cover; background-position:center center; pointer-events:none; }
  .scene::before{ z-index:0; }

  .lights{ position:absolute; inset:0; z-index:1 !important; pointer-events:none !important; opacity:0.15; display:flex; align-items:center; justify-content:center; }
  .lights img{ max-width:110%; max-height:100%; width:auto; height:auto; object-fit:contain; pointer-events:none !important; }

  /* Clickable areas over greenscreen positions - no images, just invisible links */
  .slot{ 
    position:absolute !important; 
    z-index:10 !important; 
    pointer-events:auto !important; 
  }
  .slot a{ 
    display:block !important; 
    width:100% !important; 
    height:100% !important; 
    text-decoration:none !important; 
    cursor:pointer !important; 
    position:relative !important;
    z-index:10 !important;
  }
  
  /* PC slot positioning - positioned to align with numbered greenscreen areas */
  /* Increased size for better clickability */
  .pc .slot-1{ top:10% !important; left:10% !important; width:35% !important; height:25% !important; } /*Firadpatra*/
  .pc .slot-2{ top:3% !important; left:38% !important; width:30% !important; height:27% !important; } /*Blogpost*/
  .pc .slot-3{ top:40% !important; right:20% !important; width:20% !important; height:25% !important; }/*YouTube*/
  .pc .slot-4{ top:20% !important; right:20% !important; width:16% !important; height:10% !important; } /* Greenscreen 4 */
  .pc .slot-5{ top:40% !important; left:20% !important; width:20% !important; height:40% !important; } /*Px1rt*/
  .pc .slot-6{ top:25% !important; right:15% !important; width:10% !important; height:10% !important; }
  
  /* Mobile slot positioning */
  .mobile .slot-1{ top:33% !important; left:2% !important; width:20% !important; height:5% !important; } /*Firadpatra*/
  .mobile .slot-2{ top:23% !important; left:33% !important; width:30% !important; height:20% !important; } /*Blogpost*/
  .mobile .slot-3{ top:33% !important; right:2% !important; width:30% !important; height:10% !important; } /*YouTube*/
  .mobile .slot-4{ top:48% !important; left:10% !important; width:10% !important; height:5% !important; }  /* Greenscreen 4 */
  .mobile .slot-5{ top:45% !important; right:2% !important; width:18% !important; height:10% !important; } /*Px1rt*/ 
  .mobile .slot-5{ top:33% !important; right:1% !important; width:8% !important; height:10% !important; } /*download*/
  
  
  /* Debug mode - uncomment to see clickable areas during development */
  /* body.debug .slot{ background-color:rgba(255,0,0,0.3) !important; border:2px dashed rgba(255,255,255,0.5) !important; } */

  .pc{ display:block; }
  .pc::before{ background-image:url('/pc/bg.jpg'); background-position:center top -8%; }
  .pc::after { display:none; } /* Remove overlay */

  .mobile{ display:none; }
  .mobile::before{ background-image:url('/mobile/bg.jpg'); }
  .mobile::after { display:none; } /* Remove overlay */

  @media (max-width:800px){
    .pc{ display:none; } .mobile{ display:block; }
    .mobile::before, .mobile::after { background-size:cover; background-position:top center; }
    .mobile .lights { background-size:auto; background-position:center; }
  }

  .footer-nav{ position:fixed; left:0; right:0; bottom:14px; display:flex; justify-content:space-between; align-items:center; padding:0 18px; z-index:6; pointer-events:none; }
  .footer-left, .footer-center, .footer-right{ width:33%; display:flex; align-items:center; pointer-events:auto; }
  .footer-left{ justify-content:flex-start; } .footer-center{ justify-content:center; } .footer-right{ justify-content:flex-end; }
  .footer-nav a{ font-family:"Helvetica", Arial, sans-serif; color:#fff; text-decoration:none; font-weight:600; text-shadow:0 3px 8px rgba(0,0,0,.6); pointer-events:auto; }
  
  /* Notification */
  .notification{ 
    position:fixed; 
    bottom:80px; 
    left:50%; 
    transform:translateX(-50%) translateY(100px);
    background:rgba(255,255,255,0.95); 
    color:#000; 
    padding:16px 24px; 
    border-radius:8px; 
    font-family:"Helvetica", Arial, sans-serif; 
    font-size:14px; 
    font-weight:500;
    z-index:10000; 
    opacity:0; 
    transition:all 0.3s ease;
    box-shadow:0 4px 12px rgba(0,0,0,0.3);
    pointer-events:none;
  }
  .notification.show{ 
    opacity:1; 
    transform:translateX(-50%) translateY(0);
  }

  body.debug .slot{ outline:2px dashed rgba(255,255,255,.85) }

  /* --------- Newsletter modal styles (fixed) ---------- */
  .modal-backdrop {
    display:none;                /* show via JS (set to flex) */
    position:fixed;
    inset:0;
    z-index:9999;               /* high above everything */
    background:transparent !important;     /* transparent backdrop */
    align-items:center;
    justify-content:center;
    padding:20px;
  }

  .modal-sheet {
    position:relative;
    width: min(720px, 94vw);
    max-width: 720px;
    max-height: 82vh;
    background: transparent !important;    /* transparent background */
    box-shadow: none !important;           /* remove shadow */
    border: none !important;
  }

  /* show pc image by default, hide mobile; swapped by media query */
  .modal-art { display:block; width:100%; height:auto; pointer-events:none; user-select:none; position:relative; z-index:1; }
  .modal-art.mobile-only { display:none; }
  .modal-art.pc-only { display:block; }

  /* Newsletter modal - text positioned within newsletter.png outlines */
  .modal-heading {
    position:absolute;
    left:50%;
    top:15%;
    transform:translateX(-50%);
    z-index:4;
    font-family:Helvetica, Arial, sans-serif;
    font-weight:700;
    font-size:1.25rem;
    color:#fff;
    text-shadow:0 2px 6px rgba(0,0,0,.6);
    pointer-events:none;
    text-align:center;
    width:80%;
  }
  
  /* overlay text area on top of image */
  .modal-overlay {
    position:absolute;
    left:50%;
    transform:translateX(-50%);
    right:auto;
    bottom:18%;
    padding:0 18px;
    width:70%;
    display:flex;
    gap:8px;
    align-items:center;
    justify-content:center;
    z-index:3;
    pointer-events:auto;
  }

  .modal-input {
    flex:1;
    padding:10px 12px;
    border-radius:8px;
    border:1px solid rgba(0,0,0,.25);
    font-family:Helvetica,Arial,sans-serif;
    font-size:14px;
  }
  .modal-submit {
    padding:10px 12px;
    border-radius:8px;
    border:0;
    background:#ffd400;
    font-weight:700;
    cursor:pointer;
    font-family:Helvetica,Arial,sans-serif;
  }

  .modal-close {
    position:absolute;
    right:8%;
    top:8%;
    z-index:5;
    width:36px;
    height:36px;
    border-radius:999px;
    background:rgba(0,0,0,.6);
    color:#fff;
    border:2px solid rgba(255,255,255,.3);
    cursor:pointer;
    font-size:20px;
    line-height:1;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .modal-close:hover {
    background:rgba(0,0,0,.8);
    border-color:rgba(255,255,255,.5);
  }

  /* mobile art visible under 800px */
  @media (max-width:800px){
    .modal-art { display:none; }
    .modal-art.mobile-only { display:block; width:100%; height:auto; }
    .modal-heading { left:50%; transform:translateX(-50%); top:12%; font-size:1.05rem; width:75%; }
    .modal-overlay { padding:0 12px; bottom:15%; width:65%; }
  }

</style>
</head>
<body>

<!-- PC scene -->
<section class="scene pc" aria-label="Desktop scene">
  <div class="lights" aria-hidden="true">
    <img id="lights-pc" src="/pc/lights.gif" alt="" />
  </div>

  <!-- Clickable areas over greenscreen positions -->
  <div class="slot slot-1" data-slot="#1">
    <a href="#" aria-label="Link 1" title="Link 1"></a>
  </div>

  <div class="slot slot-2" data-slot="#2">
    <a href="/posts.html" aria-label="Latest Post" title="Latest Post"></a>
  </div>

  <div class="slot slot-3" data-slot="#3">
    <a href="#" aria-label="Link 3" title="Link 3"></a>
  </div>

  <div class="slot slot-4" data-slot="#4">
    <a href="#" aria-label="Link 4" title="Link 4"></a>
  </div>

  <div class="slot slot-5" data-slot="#5">
    <a href="#" aria-label="Link 5" title="Link 5"></a>
  </div>

 <div class="slot slot-6" data-slot="#6">
    <a href="#" aria-label="Link 6" title="Link 6"></a>
  </div>
  
</section>

<!-- Mobile scene -->
<section class="scene mobile" aria-label="Mobile scene">
  <div class="lights" aria-hidden="true">
    <img id="lights-mobile" src="/mobile/lights.gif" alt="" />
  </div>

  <!-- Clickable areas over greenscreen positions -->
  <div class="slot slot-1" data-slot="#1">
    <a href="#" aria-label="Link 1" title="Link 1"></a>
  </div>

  <div class="slot slot-2" data-slot="#2">
    <a href="/posts.html" aria-label="Latest Post" title="Latest Post"></a>
  </div>

  <div class="slot slot-3" data-slot="#3">
    <a href="#" aria-label="Link 3" title="Link 3"></a>
  </div>

  <div class="slot slot-4" data-slot="#4">
    <a href="#" aria-label="Link 4" title="Link 4"></a>
  </div>

  <div class="slot slot-5" data-slot="#5">
    <a href="#" aria-label="Link 5" title="Link 5"></a>
  </div>

  <div class="slot slot-6" data-slot="#6">
    <a href="#" aria-label="Link 6" title="Link 6"></a>
  </div>
</section>

<!-- Footer nav -->
<nav class="footer-nav" aria-label="Footer navigation">
  <div class="footer-left"><a id="resume-link" href="/files/resume.pdf" download>Resume</a></div>
  <div class="footer-center"><a id="newsletter-open" href="#newsletter">Signup for Newsletter</a></div>
  <div class="footer-right"><a id="archive-link" href="/archive.html">Archive posts</a></div>
</nav>

<!-- Notification -->
<div id="notification" class="notification"></div>

<!-- Newsletter modal (fixed) -->
<div id="newsletter-modal" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal-sheet" role="document" aria-labelledby="newsletter-heading">
    <!-- PC art -->
    <img src="/pc/newsletter.png" alt="" class="modal-art pc-only" />
    <!-- Mobile art -->
    <img src="/mobile/newsletter.png" alt="" class="modal-art mobile-only" />

    <!-- heading text overlay (Helvetica) - positioned within newsletter.png outlines -->
    <div id="newsletter-heading" class="modal-heading">Subscribe to my newsletter</div>

    <!-- close button -->
    <button id="newsletter-close" class="modal-close" aria-label="Close">Ã—</button>

    <!-- input & submit overlayed at bottom -->
    <div class="modal-overlay">
      <form id="newsletter-form-inline" style="display:flex;gap:8px;width:100%;align-items:center;">
        <label for="newsletter-email" style="position:absolute;left:-9999px">Email</label>
        <input id="newsletter-email" name="email" type="email" placeholder="you@example.com" required autocomplete="email" class="modal-input" />
        <button type="submit" class="modal-submit">Subscribe</button>
      </form>
    </div>
  </div>
</div>

<script>
/* Lights GIF loader - displays animated GIF over background */
(function(){
  // Check if GIFs exist, if not hide the lights layer
  const pcImg = document.getElementById('lights-pc');
  const mobileImg = document.getElementById('lights-mobile');
  
  if(pcImg){
    pcImg.onerror = function(){ this.style.display = 'none'; };
  }
  if(mobileImg){
    mobileImg.onerror = function(){ this.style.display = 'none'; };
  }
})();

/* Newsletter modal behavior + fallback */
(function(){
  const modal = document.getElementById('newsletter-modal');
  const open = document.getElementById('newsletter-open');
  const closeBtn = document.getElementById('newsletter-close');
  const form = document.getElementById('newsletter-form-inline');
  const input = document.getElementById('newsletter-email');

  function showModal(){
    modal.style.display = 'flex';
    modal.setAttribute('aria-hidden','false');
    // focus input after a tiny delay so keyboard works on mobile
    setTimeout(()=> input.focus(), 120);
  }
  function hideModal(){
    modal.style.display = 'none';
    modal.setAttribute('aria-hidden','true');
  }

  // Attach open/close handlers
  if(open) open.addEventListener('click', e => { e.preventDefault(); showModal(); });
  if(closeBtn) closeBtn.addEventListener('click', hideModal);
  modal.addEventListener('click', e => { if(e.target === modal) hideModal(); });
  addEventListener('keydown', e => { if(e.key === 'Escape') hideModal(); });

  // Local storage fallback and server POST try
  const LOCAL_KEY = 'newsletter_emails_v1';
  function loadList(){ try{ return JSON.parse(localStorage.getItem(LOCAL_KEY) || '[]'); }catch{ return []; } }
  function saveList(list){ localStorage.setItem(LOCAL_KEY, JSON.stringify(list)); }

  async function postToServer(email){
    try {
      const r = await fetch('/api/signup', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ email })
      });
      if(!r.ok) throw new Error('server failed');
      return true;
    } catch(e){
      return false;
    }
  }

  // Notification function
  function showNotification(message){
    const notification = document.getElementById('notification');
    notification.textContent = message;
    notification.classList.add('show');
    setTimeout(()=>{
      notification.classList.remove('show');
      setTimeout(()=>{
        notification.textContent = '';
      }, 300);
    }, 3000);
  }

  form.addEventListener('submit', async e => {
    e.preventDefault();
    const email = (input.value || '').trim().toLowerCase();
    if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){ 
      showNotification('Please enter a valid email address.');
      return; 
    }

    // try server
    const ok = await postToServer(email);
    if(ok){
      showNotification('You have been signed up!');
      hideModal();
      form.reset();
      return;
    }

    // fallback local
    const list = loadList();
    if(list.some(x => x.email === email)){ 
      showNotification('You are already subscribed.');
      return; 
    }
    list.push({ email, ts: new Date().toISOString() });
    saveList(list);
    showNotification('You have been signed up!');
    hideModal();
    form.reset();
  });

})();
</script>
</body>
</html>
