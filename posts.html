<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Posts — Noticeboard</title>
<style>
  html,body{height:100%;margin:0;font-family:Helvetica,Arial,sans-serif;background:#cfcfcf;}
  .wrap{min-height:100vh; display:flex; align-items:center; justify-content:center; padding:36px; box-sizing:border-box;}
  .board{
    position:relative;
    width:min(1100px,95vw);
    height:min(700px,84vh);
    background: #cfcfcf;
    box-shadow: 0 18px 60px rgba(0,0,0,.45), inset 0 0 0 8px rgba(0,0,0,.12);
    border-radius:12px;
    overflow:hidden;
    display:flex; align-items:center; justify-content:center;
  }
  .layer.paper,
  .layer.board-overlay { position:absolute; inset:0; background-repeat:no-repeat; background-position:center; background-size:cover; pointer-events:none; }
  .layer.paper { z-index:0; filter:drop-shadow(0 10px 30px rgba(0,0,0,.45)); }
  .content { z-index:1; width:76%; max-height:80%; overflow:auto; padding:42px 48px; box-sizing:border-box; background:transparent; color:#111; font-size:1.05rem; line-height:1.6; }
  .content pre { white-space:pre-wrap; font-family:Georgia, "Times New Roman", serif; font-size:1rem; color:#222; }
  .layer.board-overlay{ z-index:2; pointer-events:none; mix-blend-mode:normal; }
  .topbar { position:absolute; top:14px; left:14px; z-index:3; display:flex; gap:8px; align-items:center; }
  .btn { font-family:Helvetica,Arial,sans-serif; background:#ffd400; border-radius:10px; padding:.5rem .8rem; font-weight:700; box-shadow:0 6px 14px rgba(0,0,0,.25); text-decoration:none; color:#111; }
  @media (max-width:800px){
    .board{ width:94vw; height:84vh; border-radius:8px; }
    .content{ width:86%; padding:28px; font-size:1rem; }
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="board" role="main" aria-label="Post view (noticeboard)">
      <div class="layer paper" id="paper-layer" aria-hidden="true"></div>

      <div class="content" id="post-content">
        <pre>Loading post…</pre>
      </div>

      <div class="layer board-overlay" id="overlay-layer" aria-hidden="true"></div>

      <div class="topbar">
        <a href="/" class="btn" title="Back">Back</a>
      </div>
    </div>
  </div>

<script>
(function(){
  function isMobile() { return window.matchMedia('(max-width:800px)').matches; }
  const kind = isMobile() ? 'mobile' : 'pc';
  document.getElementById('paper-layer').style.backgroundImage = `url('/${kind}/paper.png')`;
  document.getElementById('overlay-layer').style.backgroundImage = `url('/${kind}/noticeboard.png')`;

  fetch('/posts/text.txt').then(r=>{
    if(!r.ok) throw new Error('no text file found');
    return r.text();
  }).then(txt=>{
    const el = document.getElementById('post-content');
    el.innerHTML = '';
    const pre = document.createElement('pre');
    pre.textContent = txt;
    el.appendChild(pre);
  }).catch(err=>{
    const el = document.getElementById('post-content');
    el.innerHTML = '<p style="color:#222;">This post is not yet available. Create <code>/posts/text.txt</code> to publish.</p>';
  });

  // reload when viewport crosses threshold
  let lastKind = kind;
  addEventListener('resize', () => {
    const newKind = isMobile() ? 'mobile' : 'pc';
    if(newKind !== lastKind) location.reload();
  });
})();
</script>
</body>
</html>
